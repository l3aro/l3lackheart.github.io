{"version":3,"sources":["../../src/pages/notification/notification.module.ts","../../src/pages/notification/notification.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { PipesModule } from './../../pipes/pipes.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { NotificationPage } from './notification';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    NotificationPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(NotificationPage),\r\n    PipesModule\r\n  ],\r\n})\r\nexport class NotificationPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notification/notification.module.ts","import { FormatDateTimePipe } from './../../pipes/format-date-time/format-date-time';\r\nimport { RestProvider } from './../../providers/rest/rest';\r\nimport { Component } from '@angular/core';\r\nimport { ViewController, AlertController, IonicPage, LoadingController, InfiniteScroll } from 'ionic-angular';\r\n\r\n/**\r\n * Generated class for the NotificationPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-notification',\r\n  templateUrl: 'notification.html',\r\n})\r\nexport class NotificationPage {\r\n\r\n  items: any;\r\n  nextSelector: string;\r\n  page: number;\r\n  perPage: number;\r\n  totalData: number;\r\n  totalPage: number;\r\n\r\n  constructor(\r\n    public alert: AlertController, \r\n    public view: ViewController,\r\n    public loading: LoadingController,\r\n    public rest: RestProvider,\r\n    public formatDateTime: FormatDateTimePipe,\r\n    ) {\r\n      this.page = 1;\r\n      this.perPage = 0;\r\n      this.totalData = 0;\r\n      this.totalPage = 0;\r\n      this.items = [];\r\n  }\r\n\r\n  ionViewWillEnter(){\r\n    let loadNotif = this.loading.create();\r\n    loadNotif.present();\r\n    this.rest.getAllNotification().then(\r\n      (scs:any) => {\r\n        for (let i = 0; i < scs.notification.data.length; i++) {\r\n          this.items.push( scs.notification.data[i] );\r\n          \r\n        }\r\n        this.nextSelector = scs.notification.next_page_url;\r\n        this.page = scs.notification.current_page;\r\n        this.totalData = scs.notification.total;\r\n        this.totalPage = scs.notification.last_page;\r\n        loadNotif.dismiss();\r\n      }\r\n      \r\n    );\r\n  }\r\n\r\n  showNotificaltionDetail(notifData, i) {\r\n    let notif = this.alert.create();\r\n    notif.setTitle(JSON.parse(notifData.data).heading);\r\n    notif.setSubTitle(this.formatDateTime.transform(notifData.created_at));\r\n    notif.setMessage(JSON.parse(notifData.data).content);\r\n    notif.addButton('OK');\r\n    notif.setCssClass('alert-notification');\r\n    notif.present();\r\n    console.log(notifData.id);\r\n\r\n    this.rest.markAsRead(notifData.id).then(\r\n      (scs: any) => {\r\n        this.items[i].read_at = scs.read_at;\r\n      },\r\n      (err) => {\r\n        console.log(err);\r\n      }\r\n    )\r\n  }\r\n\r\n  parseNotificationData(data) {\r\n    return JSON.parse(data);\r\n  }\r\n\r\n  doInfinite(infiniteScroll: InfiniteScroll) {\r\n    this.rest.getAllNotification(this.nextSelector).then(\r\n      (scs: any) => {\r\n        for (let i = 0; i < scs.notification.data.length; i++) {\r\n          this.items.push( scs.notification.data[i] );\r\n        }\r\n        this.nextSelector = scs.notification.next_page_url;\r\n        this.page = scs.notification.current_page;\r\n        this.totalData = scs.notification.total;\r\n        this.totalPage = scs.notification.last_page;\r\n\r\n        infiniteScroll.complete();\r\n\r\n        if (this.items.length > 90) {\r\n          infiniteScroll.enable(false);\r\n        }\r\n      },\r\n      (err) => {\r\n        console.log(err);\r\n        \r\n      }\r\n    );\r\n  }\r\n\r\n  markAllAsRead() {\r\n    this.rest.markAllAsRead().then(\r\n      () => {\r\n        for (let i=0; i < this.items.length; i++) {\r\n          this.items[i].read_at = 1;\r\n        }\r\n      },\r\n      (err) => {\r\n        console.log(err);\r\n        \r\n      }\r\n    )\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notification/notification.ts"],"sourceRoot":""}