{"version":3,"sources":["../../src/pages/wallet/wallet.module.ts","../../src/pages/wallet/wallet.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACO;AACV;AACiB;AAWvD;IAAA;IAA+B,CAAC;IAAnB,gBAAgB;QAT5B,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,2DAAU;aACX;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,2DAAU,CAAC;gBACpC,wEAAW;aACZ;SACF,CAAC;OACW,gBAAgB,CAAG;IAAD,uBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;ACdwD;AACX;AACf;AACjB;AACqC;AAChB;AACN;AAEzD;;;;;GAKG;AAOH;IASE,oBACS,KAAsB,EACtB,IAAkB,EAClB,MAAsB,EACtB,IAAkB,EAClB,OAAsB,EACtB,WAA4B,EAC5B,cAAkC;QAP3C,iBA6BC;QA5BQ,UAAK,GAAL,KAAK,CAAiB;QACtB,SAAI,GAAJ,IAAI,CAAc;QAClB,WAAM,GAAN,MAAM,CAAgB;QACtB,SAAI,GAAJ,IAAI,CAAc;QAClB,YAAO,GAAP,OAAO,CAAe;QACtB,gBAAW,GAAX,WAAW,CAAiB;QAC5B,mBAAc,GAAd,cAAc,CAAoB;QAEzC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QACd,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;QACjB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;QAChB,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,IAAI,CAC/B,UAAC,GAAQ;YACP,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACtD,KAAI,CAAC,KAAK,CAAC,IAAI,CAAE,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAE,CAAC;YAC9C,CAAC;YACD,KAAI,CAAC,YAAY,GAAG,GAAG,CAAC,YAAY,CAAC,aAAa,CAAC;YACnD,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC,YAAY,CAAC,YAAY,CAAC;YAC1C,KAAI,CAAC,SAAS,GAAG,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC;YACxC,KAAI,CAAC,SAAS,GAAG,GAAG,CAAC,YAAY,CAAC,SAAS,CAAC;QAC9C,CAAC,EACD,UAAC,GAAG;YACF,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAEnB,CAAC,CACF,CAAC;IACJ,CAAC;IAED,qCAAgB,GAAhB;QACE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;YACnB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;YAClC,MAAM,CAAC;QACT,CAAC;QACD,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;IAC5B,CAAC;IAED,0CAAqB,GAArB,UAAsB,IAAI;QACxB,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,KAAG,IAAI,EAAC,UAAS,EAAC,UAAS,CAAC;QACtD,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,EAAC,KAAI,CAAC,OAAO,EAAC,GAAE,CAAC;QAC3C,IAAI,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;QACtC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACjC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;QACxE,WAAW,CAAC,UAAU,CAAC,kBAAkB,GAAC,IAAI,CAAC,SAAS,GAAC,IAAI,GAAC,KAAK,GAAC,gBAAgB,GAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,GAAC,MAAM,GAAC,KAAK,GAAC,OAAO,GAAC,MAAM,CAAC,CAAC;QAC1J,WAAW,CAAC,WAAW,CAAC,mBAAmB,CAAC,CAAC;QAC7C,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAC5B,WAAW,CAAC,OAAO,EAAE,CAAC;IACxB,CAAC;IAED,+BAAU,GAAV,UAAW,cAA8B;QAAzC,iBAsBC;QArBC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,IAAI,CAChD,UAAC,GAAQ;YACP,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACtD,KAAI,CAAC,KAAK,CAAC,IAAI,CAAE,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAE,CAAC;YAC9C,CAAC;YACD,KAAI,CAAC,YAAY,GAAG,GAAG,CAAC,YAAY,CAAC,aAAa,CAAC;YACnD,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC,YAAY,CAAC,YAAY,CAAC;YAC1C,KAAI,CAAC,SAAS,GAAG,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC;YACxC,KAAI,CAAC,SAAS,GAAG,GAAG,CAAC,YAAY,CAAC,SAAS,CAAC;YAE5C,cAAc,CAAC,QAAQ,EAAE,CAAC;YAE1B,EAAE,CAAC,CAAC,KAAI,CAAC,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;gBAC3B,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAC/B,CAAC;QACH,CAAC,EACD,UAAC,GAAG;YACF,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAEnB,CAAC,CACF,CAAC;IACJ,CAAC;IAED,yCAAoB,GAApB,UAAqB,OAAO;QAC1B,6DAA6D;QAC7D,oBAAoB;QACpB,gBAAgB;QAChB,MAAM;QACN,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;IACxC,CAAC;IA3FU,UAAU;QAJtB,gEAAS,CAAC;YACT,QAAQ,EAAE,aAAa;WACG;SAC3B,CAAC;uFAW+B;YAChB,gFAAY;YACV,2EAAc;YAChB,oEAAY;YACT,yFAAa;YACT,oGAAe;YACZ,OAAkB;OAhBhC,UAAU,CA6FtB;IAAD,CAAC;AAAA;SA7FY,UAAU,e","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { WalletPage } from './wallet';\r\nimport { PipesModule } from '../../pipes/pipes.module';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    WalletPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(WalletPage),\r\n    PipesModule\r\n  ],\r\n})\r\nexport class WalletPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/wallet/wallet.module.ts","import { FormatDateTimePipe } from './../../pipes/format-date-time/format-date-time';\r\nimport { FormatMoneyPipe } from './../../pipes/format-money/format-money';\r\nimport { RestProvider } from './../../providers/rest/rest';\r\nimport { Component } from '@angular/core';\r\nimport { AlertController, IonicPage, NavController, InfiniteScroll } from 'ionic-angular';\r\nimport { GlobalProvider } from '../../providers/global/global';\r\nimport { AuthProvider } from '../../providers/auth/auth';\r\n\r\n/**\r\n * Generated class for the WalletPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-wallet',\r\n  templateUrl: 'wallet.html',\r\n})\r\nexport class WalletPage {\r\n\r\n  items: any;\r\n  nextSelector: string;\r\n  page: number;\r\n  perPage: number;\r\n  totalData: number;\r\n  totalPage: number;\r\n\r\n  constructor(\r\n    public alert: AlertController, \r\n    public rest: RestProvider, \r\n    public global: GlobalProvider,\r\n    public auth: AuthProvider,\r\n    public navCtrl: NavController,\r\n    public formatMoney: FormatMoneyPipe,\r\n    public formatDateTime: FormatDateTimePipe,\r\n    ) {\r\n    this.page = 1;\r\n    this.perPage = 0;\r\n    this.totalData = 0;\r\n    this.totalPage = 0;\r\n    this.items = [];\r\n    this.rest.getWalletHistory().then(\r\n      (scs: any) => {\r\n        for (let i = 0; i < scs.transactions.data.length; i++) {\r\n          this.items.push( scs.transactions.data[i] );\r\n        }\r\n        this.nextSelector = scs.transactions.next_page_url;\r\n        this.page = scs.transactions.current_page;\r\n        this.totalData = scs.transactions.total;\r\n        this.totalPage = scs.transactions.last_page;\r\n      },\r\n      (err) => {\r\n        console.log(err);\r\n        \r\n      }\r\n    );  \r\n  }\r\n\r\n  ionViewWillEnter(){\r\n    if (!this.auth.authenticated()) {\r\n      this.auth.logout();\r\n      this.navCtrl.setRoot('LoginPage');\r\n      return;\r\n    }\r\n    this.global.getUserInfo();\r\n  }\r\n\r\n  showTransactionDetail(item) {\r\n    let arrow = item.direction==='in'?'&nearr;':'&searr;';\r\n    let content = item.content?item.content:\"\";\r\n    let transaction = this.alert.create();\r\n    transaction.setTitle(item.title);\r\n    transaction.setSubTitle(this.formatDateTime.transform(item.created_at));\r\n    transaction.setMessage('<p><span class=\"'+item.direction+'\">'+arrow+' </span>&nbsp;'+this.formatMoney.transform(item.amount)+'</p>'+'<p>'+content+'</p>');\r\n    transaction.setCssClass('alert-transaction');\r\n    transaction.addButton('OK');\r\n    transaction.present();\r\n  }\r\n\r\n  doInfinite(infiniteScroll: InfiniteScroll) {\r\n    this.rest.getWalletHistory(this.nextSelector).then(\r\n      (scs: any) => {\r\n        for (let i = 0; i < scs.transactions.data.length; i++) {\r\n          this.items.push( scs.transactions.data[i] );\r\n        }\r\n        this.nextSelector = scs.transactions.next_page_url;\r\n        this.page = scs.transactions.current_page;\r\n        this.totalData = scs.transactions.total;\r\n        this.totalPage = scs.transactions.last_page;\r\n\r\n        infiniteScroll.complete();\r\n\r\n        if (this.items.length > 90) {\r\n          infiniteScroll.enable(false);\r\n        }\r\n      },\r\n      (err) => {\r\n        console.log(err);\r\n        \r\n      }\r\n    );\r\n  }\r\n\r\n  presentNotifications(myEvent) {\r\n    // let popover = this.popoverCtrl.create('NotificationPage');\r\n    // popover.present({\r\n    //   ev: myEvent\r\n    // });\r\n    this.navCtrl.push('NotificationPage');\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/wallet/wallet.ts"],"sourceRoot":""}